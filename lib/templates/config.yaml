# Example configuration for OpenTox, please adjust to your settings
# 
# Database setup:
#
# Example MySql:
#
:database: 
  :adapter:  mysql
  :database: production
  :username: root
  :password: opentox
  :host:     localhost
#
# Example 1: Using external test services
#
# :services:
#  opentox-compound:      "http://webservices.in-silico.ch/compound/"
#  opentox-dataset:       "http://webservices.in-silico.ch/dataset/"
#  opentox-algorithm:     "http://webservices.in-silico.ch/algorithm/"
#  opentox-model:         "http://webservices.in-silico.ch/model/"
#  opentox-task:          "http://webservices.in-silico.ch/task/"
#  opentox-validation:    "http://opentox.informatik.uni-freiburg.de/validation/"
#
# Example 2: Using local services
:base_dir: /home/ist/webservices
:webserver: passenger
:services:
  opentox-compound:      "http://localhost/compound/"
  opentox-dataset:       "http://localhost/dataset/"
  opentox-algorithm:     "http://localhost/algorithm/"
  opentox-model:         "http://localhost/model/"
  opentox-task:          "http://localhost/task/"
  opentox-validation:    "http://localhost/validation/"
#
# Yaml capable hosts (faster than OWL-DL)
#
:yaml_hosts:
  - "localhost"

# Uncomment for verbose logging
# :logger: debug
# :backtrace: 1
  
  
# OpenSSO Authorization
# set ":server: " to disable A&A
:authorization:
  :server: "https://opensso.in-silico.ch"
  :free_request: #request-method not controlled by A&A
    - "GET"
  :authenticate_request: #only for authenticated user
    - "POST"
  :authorize_request:  #only for authenticated and authorizeduser
    - "DELETE"
    - "PUT"
  # Exceptions:
  :free_uris: #request-method for uri not controlled by A&A
    ? - :GET
    : - !ruby/regexp /localhost\/algorithm/
      - "http://localhost/dataset"
      - "http://localhost/model"
      - "http://localhost/validation"
      - "http://localhost/validation/crossvalidation"
      - "http://localhost/validation/reach_report"      
      - "http://localhost/validation/reach_report/crossvalidation"
      - "http://localhost/validation/report"   
      - "http://localhost/validation/report/crossvalidation"
      - "http://localhost/validation/reach_report/qmrf"
    ? - :GET
      - :POST
    : - !ruby/regexp /localhost\/toxcreate/
      - !ruby/regexp /localhost\/task/
      - !ruby/regexp /localhost\/compound/
    ? - :PUT
    : - !ruby/regexp /localhost\/task/

  :authorize_exceptions: #request-method for uri only authenticated, no authorization
    ? - :POST
    : - !ruby/regexp /localhost\/algorithm/
      - "http://localhost/dataset"
      - "http://localhost/model"
      - "http://localhost/validation"
      - !ruby/regexp /localhost\/validation\/[a-z,A-Z,\/,_\-]*$/

  
  